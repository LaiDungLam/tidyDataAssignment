### Let’s set up evironment for the analysis

    features <- read.table("./data/features.txt")
    subject <- read.table("./data/train/subject_train.txt")
    data <- read.table("./data/train/X_train.txt")
    activityId <- read.table("./data/train/y_train.txt")
    activity_label <- read.table("./data/activity_labels.txt")
    
    #read in my generated tidy data set submitted on Coursera 
    tidyData <- read.table("myTidyDataset.txt", header=TRUE) #make sure that you put the file myTidyDataset.txt in your R working directory before running it. 

### The data set
This section describes the data set used in this assignment. First, the data set was collected in the research that attempted to measure some biological measurements from human activities. The research employed wearable smartphones to collect data.

In general, there are subjects who wore wearable devices and performed a set of predefined activities. The devices captured some signals that then were processed to generate 33 other measurements. The generated measurements describes some properties of the subjects’ body while doing the activities.

The 33 measurements were then further measured by a number of aspects, such as mean() and std(). All together, there are 561 distinct features are generated from the collected signals.

Finally, the collected data was then divided into two data sets, one is train and the other is test. In these two data sets, there is one file starts with X that contains the raw measurements only. The other file starts with y whose content indicates the ID of the activities performed by the subjects. Furthermore, in each data set, there is one another file started with subject that records the subjectId of the volunteers who performed the activities.

There are other two files that are used for both data sets. One is named feature, which contains the names of the aforementioned 561 features measured. Another file specifies the labels of the six activities.

### The variable
I shall use feature represented for the term variable since both mean the same thing. Although there are 561 features are generated by the collected signals, only ones with mean() and std() are the targeted features of this assignment. Thus, the final tidy data set contains only those features, among the 561 features, that measure mean() and std().

Please refer to the codebook for more information about these variables

### The transformations

#### The requirement is:

1. Merges the training and the test sets to create one data set.

2. Extracts only the measurements on the mean and standard deviation for each measurement.

3. Uses descriptive activity names to name the activities in the data set

4. Appropriately labels the data set with descriptive variable names.

5. From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject.

Although my approach generated what is expected in Step 5, it has has been done in a different order than the above steps. As said, there are two data sets in the project folder, which are train and test. My approach is to generate a tidy train data set and a tidy test data set with properties as required in step 2, 3, and 4. Then I would do step 1, merging the two tidy data sets to create one tidy data set. Finally, I would to step 5.

Let’s look at the transformation steps I did on train data set.

Just a minor note that since the transformation steps are done exactly in the same way to both the train and the test data sets. I hence just describe what I have done to the train data set.

In the train data set folder, there are three files: subject_train.txt, X_train.txt, and y_train.txt. These three files are loaded to the script under the names subject, data, and activity respectively. Furthermore, the file feaures.txt and activity_label.txt are needed to create a tidy data set as well.

### The subjects
The subject file contains subjectId of the volunteers who performed the predefined activities while wearing smartphones. Each subject performed each activities several times.

The subject_train.txt file contains 7352 rows.

    nrow(subject)
    [1] 7352

According to the research, there are 30 volunteers participating in the research and 70% of them, equivalent to 21 people, whose collect data were inputted to the train data set. As the subject represented as ID in the subject file, there should be 21 unique number in the range 1 to 30 in the subject_train.txt file.

    unique(subject[, 1])
    [1]  1  3  5  6  7  8 11 14 15 16 17 19 21 22 23 25 26 27 28 29 30

### The raw data
The data X_train.txt file includes 7352 rows and 561 columns

    nrow(data)
    ncol(data)
    [1] 7352
    [1] 561

### The activitiyID

Finally, the activityId y_train.txt file contains 7352 rows.

    nrow(activityId)
    [1] 7352

This number matches with the number of row in the subject_train.txt file shown above. That means, there is a subject doing each of the activities recorded in the activity y_train.txt file.

### The features
The number of rows of the feature is 561.
    
    nrow(features)
    [1] 561

This matches with the number of column of the raw data set. This implies that the features are the columns number of the raw data set.

### The activity label
There are six activities with IDs from 1 to 6 in this file. Indeed, the IDs matches the unique numbers in the activityId y_train.txt file, althouth there are 7352 rows in this file.
    
    activity_label
          V1
        <chr>
    1   WALKING         
    2   WALKING_UPSTAIRS            
    3   WALKING_DOWNSTAIRS          
    4   SITTING         
    5   STANDING            
    6   LAYING
    
Enough information has been set up. Let’s do some transformations on the files subject, data, and activity.

**STEP 4**: Appropriately labels the data set with descriptive variable names

This is done by binding the feature to the raw data set. Before that, the feature should be converted from row to column format.

    features <- t(features) #transpose the features from row to   column
    train_data <- rbind(features, train_data)
    colnames(train_data) <- train_data[2, ] #set row 2 as the     columns header
    train_data <- train_data[-c(1,2), ] #delete redundant rows 

**STEP 2**: Extracts only the measurements on the mean and standard deviation for each measurement IN TRAIN DATASET

    #extract column names with mean() and std() only
    mean_std <- names(train_data)[grepl("\\bmean\\b|std()" 
    names(train_data))] 
    #create new train_data with measurements on mean and standard division
    train_data <- train_data[, mean_std] 


**STEP 3**: Uses descriptive activity names to name the activities in the data set This is done by matching the labels in the activity_label to the train_label data set via ActivityID

    train_activity_label <- tbl_df(train_activity_label)
    train_activity_label <- rename(ActivityId = V1, train_activity_label)
      train_activity_label <- train_activity_label %>% mutate (Activity = case_when(ActivityId == 1 ~"Walking", 
                                                            ActivityId == 2 ~ "Walking Upstairs",
                                                            ActivityId==3 ~ "Walking Downstairs",
                                                            ActivityId == 4 ~ "Sitting", 
                                                            ActivityId == 5 ~ "Standing", 
                                                            ActivityId == 6 ~ "Laying"))

**STEP 1A** Create a tidy train data set by column binding three data set

    train_data_tidy <- cbind(train_subjects, train_activity_label, train_data)
    The transformation steps above are applied to the test data set to obtain a tidy test data set.

**STEP 1B** Create a tidy train data set

    test_data_tidy <- cbind(test_subjects, test_label, test_data)
    
**STEP 1** The completed TIDY data set

    dataset <- rbind(train_data_tidy, test_data_tidy)
    dataset <- dataset[, -2] #remove the column ActivityId

**STEP 5** An independent tidy data set with the average of each variable for each activity and each subject was created by:

    dataset_average <- dataset
    dataset_average[3:length(names(dataset_average))] <- sapply(dataset_average[3:length(names(dataset_average))], as.numeric)
    dataset_average <- dataset_average %>% group_by(SubjectId, Activity) %>% summarise_all(funs(mean))
    write.table(dataset_average, file="myTidyDataSet.txt",  row.names = FALSE)

AT this point my R Script generates what is requested by the assignment.

**The generated data set is tidy because**:

1.All columns are given properly, meaningful name.

      names(tidyData)
      
      [1] “SubjectId”
      
      [2] “Activity”
      
      [3] “tBodyAcc.mean…X”
      
      [4] “tBodyAcc.mean…Y”
      
      [5] “tBodyAcc.mean…Z”
      
      [6] “tBodyAcc.std…X”
      
      [7] “tBodyAcc.std…Y”
      
      [8] “tBodyAcc.std…Z”
      
      [9] “tGravityAcc.mean…X”
      
      [10] “tGravityAcc.mean…Y”
      
      [11] “tGravityAcc.mean…Z”
      
      [12] “tGravityAcc.std…X”
      
      [13] “tGravityAcc.std…Y”
      
      [14] “tGravityAcc.std…Z”
      
      [15] “tBodyAccJerk.mean…X”
      
      [16] “tBodyAccJerk.mean…Y”
      
      [17] “tBodyAccJerk.mean…Z”
      
      [18] “tBodyAccJerk.std…X”
      
      [19] “tBodyAccJerk.std…Y”
      
      [20] “tBodyAccJerk.std…Z”
      
      [21] “tBodyGyro.mean…X”
      
      [22] “tBodyGyro.mean…Y”
      
      [23] “tBodyGyro.mean…Z”
      
      [24] “tBodyGyro.std…X”
      
      [25] “tBodyGyro.std…Y”
      
      [26] “tBodyGyro.std…Z”
      
      [27] “tBodyGyroJerk.mean…X”
      
      [28] “tBodyGyroJerk.mean…Y”
      
      [29] “tBodyGyroJerk.mean…Z”
      
      [30] “tBodyGyroJerk.std…X”
      
      [31] “tBodyGyroJerk.std…Y”
      
      [32] “tBodyGyroJerk.std…Z”
      
      [33] “tBodyAccMag.mean..”
      
      [34] “tBodyAccMag.std..”
      
      [35] “tGravityAccMag.mean..”
      
      [36] “tGravityAccMag.std..”
      
      [37] “tBodyAccJerkMag.mean..”
      
      [38] “tBodyAccJerkMag.std..”
      
      [39] “tBodyGyroMag.mean..”
      
      [40] “tBodyGyroMag.std..”
      
      [41] “tBodyGyroJerkMag.mean..”
      
      [42] “tBodyGyroJerkMag.std..”
      
      [43] “fBodyAcc.mean…X”
      
      [44] “fBodyAcc.mean…Y”
      
      [45] “fBodyAcc.mean…Z”
      
      [46] “fBodyAcc.std…X”
      
      [47] “fBodyAcc.std…Y”
      
      [48] “fBodyAcc.std…Z”
      
      [49] “fBodyAccJerk.mean…X”
      
      [50] “fBodyAccJerk.mean…Y”
      
      [51] “fBodyAccJerk.mean…Z”
      
      [52] “fBodyAccJerk.std…X”
      
      [53] “fBodyAccJerk.std…Y”
      
      [54] “fBodyAccJerk.std…Z”
      
      [55] “fBodyGyro.mean…X”
      
      [56] “fBodyGyro.mean…Y”
      
      [57] “fBodyGyro.mean…Z”
      
      [58] “fBodyGyro.std…X”
      
      [59] “fBodyGyro.std…Y”
      
      [60] “fBodyGyro.std…Z”
      
      [61] “fBodyAccMag.mean..”
      
      [62] “fBodyAccMag.std..”
      
      [63] “fBodyBodyAccJerkMag.mean..” 
      
      [64] “fBodyBodyAccJerkMag.std..”
      
      [65] “fBodyBodyGyroMag.mean..”
      
      [66] “fBodyBodyGyroMag.std..”
      
      [67] “fBodyBodyGyroJerkMag.mean..” 
      
      [68] "fBodyBodyGyroJerkMag.std..`
    

Noticed that these column names are matched with the variables described in the section The variable above, except the first two names are the names of columns SubjectID and Activities

2.SubjectIDs are nicely arranged from 1 to 30

      unique(tidyData$SubjectId)
      
      [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 [20] 20 21 22 23 24 25 26 27 28 29 30

3.Each Subject performed six activities. The below are the activities performed by the subject ID 1 and 2. Each performed exatly six activities hence there are 12 rows.

    tidyData[tidyData$SubjectId %in% c(1, 2), 1:2]

    SubjectId Activity
    
    1 1 Laying
    
    2 1 Sitting
    
    3 1 Standing
    
    4 1 Walking
    
    5 1 Walking Downstairs
    
    6 1 Walking Upstairs
    
    7 2 Laying
    
    8 2 Sitting
    
    9 2 Standing
    
    10 2 Walking

4. The six activities are ordered by their label order numbers from 1 to 6. That means, the activities are in the same order for all 30 SubjectIds

**The generated data set meets the requirement since**:

1. For each activity of a subjects, there is only one row although a subject performed one activity several times. This is because they are all averaged by the mean() function as required.

2. Exactly only measurements with mean() and std() are included